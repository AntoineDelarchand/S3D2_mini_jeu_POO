require 'bundler'
Bundler.require

require_relative 'lib/game'
require_relative 'lib/player'

puts "
###############################################################################################################################################################################################

                                                        ▒█████   ▄████▄  ▄▄▄█████▓ ▒█████    ▄████  ▒█████   ███▄    █ ▓█████ 
                                                        ▒██▒  ██▒▒██▀ ▀█  ▓  ██▒ ▓▒▒██▒  ██▒ ██▒ ▀█▒▒██▒  ██▒ ██ ▀█   █ ▓█   ▀ 
                                                        ▒██░  ██▒▒▓█    ▄ ▒ ▓██░ ▒░▒██░  ██▒▒██░▄▄▄░▒██░  ██▒▓██  ▀█ ██▒▒███   
                                                        ▒██   ██░▒▓▓▄ ▄██▒░ ▓██▓ ░ ▒██   ██░░▓█  ██▓▒██   ██░▓██▒  ▐▌██▒▒▓█  ▄ 
                                                        ░ ████▓▒░▒ ▓███▀ ░  ▒██▒ ░ ░ ████▓▒░░▒▓███▀▒░ ████▓▒░▒██░   ▓██░░▒████▒
                                                        ░ ▒░▒░▒░ ░ ░▒ ▒  ░  ▒ ░░   ░ ▒░▒░▒░  ░▒   ▒ ░ ▒░▒░▒░ ░ ▒░   ▒ ▒ ░░ ▒░ ░
                                                        ░ ▒ ▒░   ░  ▒       ░      ░ ▒ ▒░   ░   ░   ░ ▒ ▒░ ░ ░░   ░ ▒░ ░ ░  ░
                                                        ░ ░ ░ ▒  ░          ░      ░ ░ ░ ▒  ░ ░   ░ ░ ░ ░ ▒     ░   ░ ░    ░   
                                                        ░ ░  ░ ░ ░                 ░ ░        ░     ░ ░           ░    ░  ░
                                                                ░                                                             
##############################################################################################################################################################################################
"

puts "
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
puts "                                                      Saisissez votre pseudo :"
print "                                                      > "
username = gets.chomp
puts "  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

user = HumanPlayer.new(username)

player1 = Player.new("José")
player2 = Player.new("Rose")

enemies = [player1,player2]

while user.life_points > 0 && (player1.life_points > 0 || player2.life_points > 0)
    puts "
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                                      Voici l'état de votre joueur :"


puts "                                                                      #{user.show_state}
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
"

puts "
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                                      Quelle action veux-tu effectuer"

puts "                                                                a - chercher une meilleure arme"
puts "                                                                s - chercher à se soigner"
puts ""
puts "                                                                attaquer un joueur en vue :"
puts "                                                                1 - José a #{player1.life_points} hp !"
puts "                                                                2 - Rose a #{player2.life_points} hp !
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
"
print "                                                                > "
key = gets.chomp

    while key != ["a","s",1,2]
        if key == "a"
            search_weapon
        elsif key == "s"
            search_health_pack
        elsif key == 1
            user.attacks(player1)
            "Vous avez attaqué José"
        elsif key == 2
            user.attacks(player2)
        else
        end
    end
end
puts "                                                  La Partie est finie"

if user.life_points > 0
    "-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                            
                                                            ██╗   ██╗ ██████╗ ██╗   ██╗    ██╗    ██╗ ██████╗ ███╗   ██╗    ██╗
                                                            ╚██╗ ██╔╝██╔═══██╗██║   ██║    ██║    ██║██╔═══██╗████╗  ██║    ██║
                                                             ╚████╔╝ ██║   ██║██║   ██║    ██║ █╗ ██║██║   ██║██╔██╗ ██║    ██║
                                                              ╚██╔╝  ██║   ██║██║   ██║    ██║███╗██║██║   ██║██║╚██╗██║    ╚═╝
                                                               ██║   ╚██████╔╝╚██████╔╝    ╚███╔███╔╝╚██████╔╝██║ ╚████║    ██╗
                                                               ╚═╝    ╚═════╝  ╚═════╝      ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═══╝    ╚═╝
                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
else
    "-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                                                            ██╗   ██╗ ██████╗ ██╗   ██╗    ██╗      ██████╗ ███████╗███████╗    ██╗
                                                            ╚██╗ ██╔╝██╔═══██╗██║   ██║    ██║     ██╔═══██╗██╔════╝██╔════╝    ██║
                                                             ╚████╔╝ ██║   ██║██║   ██║    ██║     ██║   ██║███████╗█████╗      ██║
                                                              ╚██╔╝  ██║   ██║██║   ██║    ██║     ██║   ██║╚════██║██╔══╝      ╚═╝
                                                               ██║   ╚██████╔╝╚██████╔╝    ███████╗╚██████╔╝███████║███████╗    ██╗
                                                               ╚═╝    ╚═════╝  ╚═════╝     ╚══════╝ ╚═════╝ ╚══════╝╚══════╝    ╚═╝
                                                                                                                                
                                                                    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
end